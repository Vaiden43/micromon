node {
  def app1

  stage("Clone repository") {
    /* clone the repository */
    checkout scm    
  }

  stage("Permissions") {
    /* change directory */
    dir("AdminServer"){
      /* set maven wrapper permissions */
      sh "chmod 711 ./mvnw"
    }
  }

  stage("Test") {
    dir("AdminServer"){
      /* runt tests */
      sh "./mvnw test"
    }
  }

  stage("Build Project") {
    dir("AdminServer"){
      /* build the project */ 
      sh "./mvnw clean install"
    }
  }

  stage("Build Image") {
    dir("AdminServer"){
      app1 = docker.build("vaiden/admin-server")
    }
  }

  stage("Push Image") {
    /* push the image to docker hub */
    sh "echo TODO"
  }
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
def app2

  stage("Clone repository") {
    /* clone the repository */
    checkout scm    
  }

  stage("Permissions") {
    /* change directory */
    dir("DiscoveryServer"){
      /* set maven wrapper permissions */
      sh "chmod 711 ./mvnw"
    }
  }

  stage("Test") {
    dir("DiscoveryServer"){
      /* runt tests */
      sh "./mvnw test"
    }
  }

  stage("Build Project") {
    dir("DiscoveryServer"){
      /* build the project */ 
      sh "./mvnw clean install"
    }
  }

  stage("Build Image") {
    dir("DiscoveryServer"){
      app2 = docker.build("vaiden/discovery-server")
    }
  }

  stage("Push Image") {
    /* push the image to docker hub */
    sh "echo TODO"
  }
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
def app3

  stage("Clone repository") {
    /* clone the repository */
    checkout scm    
  }

  stage("Permissions") {
    /* change directory */
    dir("PokemonServer"){
      /* set maven wrapper permissions */
      sh "chmod 711 ./mvnw"
    }
  }

  stage("Test") {
    dir("PokemonServer"){
      /* runt tests */
      sh "./mvnw test"
    }
  }

  stage("Build Project") {
    dir("PokemonServer"){
      /* build the project */ 
      sh "./mvnw clean install"
    }
  }

  stage("Build Image") {
    dir("PokemonServer"){
      app3 = docker.build("vaiden/pokemon-server")
    }
  }

  stage("Push Image") {
    /* push the image to docker hub */
    sh "echo TODO"
  }
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
def app4

  stage("Clone repository") {
    /* clone the repository */
    checkout scm    
  }

  stage("Permissions") {
    /* change directory */
    dir("TrainerServer"){
      /* set maven wrapper permissions */
      sh "chmod 711 ./mvnw"
    }
  }
  
  stage("Test") {
    dir("TrainerServer"){
      /* runt tests */
      sh "./mvnw test"
    }
  }

  stage("Build Project") {
    dir("TrainerServer"){
      /* build the project */ 
      sh "./mvnw clean install"
    }
  }

  stage("Build Image") {
    dir("TrainerServer"){
      app4 = docker.build("vaiden/trainer-server")
    }
  }

  stage("Push Image") {
    /* push the image to docker hub */
    sh "echo TODO"
  }
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}